<main id="app">
    <%
    console.log("---------- /admin/edit/x PAGE ---------------")
    console.log("item: " + JSON.stringify(values))

    if (typeof errors != 'undefined') {
    %>
            <ul>
                <% errors.forEach(error => { %>
                    <li><%= error.msg %></li>
                <% }) %>
            </ul>
    <%
        }
    if (typeof values.product_id == 'undefined') {
        values.product_id = id
    }
    %>
    <div class="container admin">
        <h1>EDITAR ITEM</h1>
        <form
            action="/admin/edit/<%= values.product_id %>?_method=PUT"
            method="post"
        >    
            <div class="create__fila">
                <label for="CategoryId">Categoria</label>
                <select name="CategoryId" id="CategoryId" class="">
                    <option value=""></option>
                    <% categorias.forEach(categoria => { %>
                        <option 
                            value="<%= categoria.id %>" 
                            <% if (values.CategoryId){ %>
                            <%= categoria.id == values.CategoryId ? "selected" : "" %>
                            <% } %>
                        >
                        <%= categoria.nombre %>
                        </option>
                        <% }) %>
                </select>
                <label for="LicenceId">Licencia</label>
                <select name="LicenceId" id="LicenceId" class="">
                    <option value="""></option>
                    <% licencias.forEach(licencia => { %>
                        <option 
                            value="<%= licencia.id %>" 
                            <%= licencia.id == values.LicenceId ? "selected" : "" %>
                        >
                        <%= licencia.nombre %>
                        </option>
                    <% }) %>
                </select>
            </div>
            <label for="iNombre">Nombre del producto</label>
            <input type="text" id="iNombre" name="product_name" value="<%= typeof values != 'undefined' ? values.product_name : '' %>">
            <textarea name="product_description" id="iDescripcion" cols="30" rows="10" placeholder="DescripciÃ³n del producto"><%= typeof values != 'undefined' ? values.product_description : '' %></textarea>
            <div class="create__fila">
                <label for="iSKU">SKU</label>
                <input type="text" id="iSKU" name="product_sku" value="<%= typeof values != 'undefined' ? values.product_sku : '' %>">
                <label for="iPrecio">Precio</label>
                <input type="number" id="iPrecio" name="product_price" value="<%= typeof values != 'undefined' ? values.product_price : '' %>">
                <label for="iStock">Stock</label>
                <input type="number" id="iStock" name="product_stock" value="<%= typeof values != 'undefined' ? values.product_stock : '' %>">
            </div>
            <div class="create__fila">
                <label for="iDescuento">Descuento</label>
                <input type="number" id="descuento" name="iDescuento" placeholder="0%" value="0">
                <label for="iCuotas">Cuotas</label>
                <select name="dues" id="iCuotas" class="">
                    <option value="1" selected>1 cuota</option>
                    <option value="2">2 cuotas</option>
                    <option value="3">3 cuotas</option>
                </select>
            </div>
            <label for="img_front">Imagen front</label>
                <input type="file" name="img_front" id="img_front" accept="image/*">
                <div>
                    <% if (typeof values.Licence?.nombre != 'undefined'){ %>
                    <img
                        width="50"
                        src="/img/<%= values.Licence.nombre.replace(/ /g,'-').toLowerCase() %>/producto_<%= values.product_id %>-1.jpg"
                        alt="<%= values.product_name %>"
                    />
                    <% } %>
                </div>
 
            <div class="create__fila">
                <button type="submit">Modificar producto</button>
            </div>
        </form>
    </div>

</main>